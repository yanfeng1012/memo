### xunsearch

- <a href="http://www.xunsearch.com/doc/php/guide/start.about">官方文档</a>

- 常用项

	- 项目配置

		- 项目名称

			要求用纯小写字母和小划线组成，长度控制在 2-31 个字符，这也是 xunsearch 服务器内用于保存索引数据的目录名称, 所以同一 xunsearch 服务器内的不同项目名称不可重复。默认为不含后缀的配置文件名， 如：xyz.ini 则项目名默认为 xyz 。
			
				project.name = AppName
				
		- 默认字符集

			这里的默认字符集范围涵盖服务端交互时的输入数据、输出数据，实际使用时索引文档、 检索服务器仍可重新指定字符集

				project.default_charset = UTF-8
				
		- 服务器连接参数
		
			>服务端连接参数的格式包含 3 种格式：
			
			>端口号(数字)，连接 localhost 的该端口号 (例：8383)
			
			>地址:端口号，冒号连接地址（域名、IP地址）和端口 (例：127.0.0.1:8383)
			
			>文件路径，本机的 unix socket 连接路径 (例：/tmp/index.sock)
			
				; 索引服务端配置，默认值为 8383
				server.index = 8383
				; 搜索服务端配置，默认值为 8384
				server.search = 8384
				
	-  项目字段设计

		- 定义字段
		
			每个字段用一个区段配置来表示，中括号内的名字即为字段名。每个项目包含若干个字段， 具体由项目搜索需求决定，并不需要一味的与实际源数据库 (如 MYSQL) 一致， 而只需要设计搜索功能所涉及的字段即可。
			
				[field_name]
				
		- 字段选项
		
			每个字段根据实际情况指定字段选项，所有选项均有默认值，所以即便不指定任何选项而只有中括号定义的字段， 那也是一个合法的字段，字段选项包括以下几种：
			
			- **type 字段类型**

				- **string** 字符型，适用多数情况，也是默认值
				
				- **numeric** 数值型，包含整型和浮点数，仅当字段需用于以排序或区间检索时才设为该类型，否则请使用 string　即可
				
				- **date** 日期型，形式为 YYYYmmdd 这样固定的 8 字节，如果没有区间检索或排序需求不建议使用
				
				- **id** 主键型，确保每条数据具备唯一值，是索引更新和删除的凭据，每个搜索项目必须有且仅有一个 id 字段，该字段的值不区分大小写
				
				- **title** 标题型，标题或名称字段，至多有一个该类型的字段

				- **body** 内容型，主内容字段, 即本搜索项目中内容最长的字段，至多只有一个该类型字段，本字段不支持字段检索
				
						type = string
						
		- index 索引方式
		
			>xunsearch 的索引有 2 种模式：
			
			>其一是不标明字段的检索，称之为“混合区检索”；
			
			>其二是标明特定字段的“字段检索”。 
			
			>例如：搜索 XXX YYY 表示在混合区检索，返回的结果可能是 title 也有可能是 body 字段符合匹配； 而搜索 title:XXX 则表示仅检索 title 匹配 XXX 的数据。
			
			>每个字段可以指定的索引方式的值如下：

			>none 不做索引，所有的搜索匹配均与本字段无关，这个字段只用于排序或搜索结果展示用到。
			
			>self 字段索引，可以在搜索时用 field:XXX 来检索本字段
			
			>mixed 混合区索引，不标明字段的默认搜索也可以检索本字段
			
			>both 相当于 self + mixed，两种情况均索引
			
			>通常情况默认值为 none ，但 id 型字段默认是 self ，title 型字段是 both ，body 型字段则固定为 mixed 。

				index = none
				
		- debug

				通过 XSSearch::setQuery 设置了搜索语句后，
				
				您可以调用 XSSearch::getQuery 查看您的搜索语句 在内部的分析结果，常用于 DEBUG。
				
				此外这两个方法也可以通过魔术属性 XSSearch::query 来访问。
		
				// 设置搜索语句方法1:
				$search->setQuery('神雕侠侣 -电视剧');
				 
				// 设置搜索语句方法2:
				$search->query = '神雕侠侣 -电视剧';
				 
				// 查看搜索语句解析结果方法1:
				// 不带参数，输出：Xapian::Query((神雕侠侣:(pos=1) AND_NOT 电视剧:(pos=2)))
				echo $search->getQuery();
				 
				// 带参数，则解析新语句，输出：Xapian::Query((杭州:(pos=1) AND 西湖:(pos=2)))
				echo $search->getQuery('杭州 西湖'); 
				 
				// 查看搜索语句解析结果方法2:
				// 相当于不带参数的调用 getQuery()
				echo $search->query;

